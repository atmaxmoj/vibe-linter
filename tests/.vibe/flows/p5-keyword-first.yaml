name: Keyword-First Workflow
description: Multi-wait (topic/keyword/outline/final review), section loop, final review fallback

steps:
  # ── Research Phase ──

  - 1.1 Choose topic:
      type: wait

  - 1.2 Keyword research

  - 1.3 Keyword review:
      type: wait
      next:
        - if: "keywords approved"
          go: 1.4 Write outline
        - go: 1.2 Keyword research

  - 1.4 Write outline

  - 1.5 Outline review:
      type: wait
      next:
        - if: "outline approved"
          go: 2.0 Section loop
        - go: 1.4 Write outline

  # ── Writing Loop ──

  - 2.0 Section loop:
      iterate: "sections"
      children:
        - 2.1 Write section draft
        - 2.2 Optimize for SEO
        - 2.3 Section quality check:
            next:
              - if: "section meets quality and SEO standards"
                go: 2.0 Section loop
              - go: 2.1 Write section draft

  # ── Final Review ──

  - 3.1 Assemble full article

  - 3.2 Final review:
      type: wait
      next:
        - if: "article approved for publication"
          go: Done
        - go: 2.0 Section loop

  - Done:
      type: terminate
      reason: Article published

name: Performance Optimization
description: Hotspot loop, benchmark 2-way, final benchmark fallback

steps:
  # ── Profiling ──

  - 1.1 Profile application

  - 1.2 Identify hotspots

  # ── Hotspot Loop ──

  - 2.0 Hotspot loop:
      iterate: "hotspots"
      children:
        - 2.1 Analyze hotspot
        - 2.2 Implement optimization
        - 2.3 Benchmark:
            next:
              - if: "performance improved to target"
                go: 2.0 Hotspot loop
              - go: 2.2 Implement optimization

  # ── Final Benchmark ──

  - 3.1 Final benchmark:
      next:
        - if: "overall performance meets target"
          go: Done
        - go: 2.0 Hotspot loop

  - Done:
      type: terminate
      reason: Performance targets met

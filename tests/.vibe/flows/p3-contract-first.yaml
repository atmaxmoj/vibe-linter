名称: Contract-First Development
描述: Formal contract, generate stubs, endpoint loop, bidirectional integration

步骤:
  # ── Contract Definition ──

  - 1.1 Define contract

  - 1.2 Contract review:
      类型: wait
      下一步:
        - 如果: "contract is approved"
          去: 1.3 Generate stubs
        - 去: 1.1 Define contract

  - 1.3 Generate stubs

  # ── Endpoint Loop ──

  - 2.0 Endpoint loop:
      遍历: "endpoints"
      子步骤:
        - 2.1 Implement endpoint
        - 2.2 Contract validation:
            下一步:
              - 如果: "endpoint conforms to contract"
                去: 2.0 Endpoint loop
              - 去: 2.1 Implement endpoint

  # ── Bidirectional Testing ──

  - 3.1 Bidirectional integration test:
      下一步:
        - 如果: "both provider and consumer pass"
          去: Done
        - 去: 2.0 Endpoint loop

  - Done:
      类型: terminate
      原因: Contract verified bidirectionally

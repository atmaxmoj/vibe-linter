name: Spaced Repetition
description: Session loop, 4-way rating (again/hard/good/easy), outer retry

steps:
  # ── Setup ──

  - 1.1 Create flashcard deck

  - 1.2 Set schedule

  # ── Session Loop ──

  - 2.0 Session loop:
      iterate: "sessions"
      children:
        - 2.1 Present cards
        - 2.2 Self-assess
        - 2.3 Rate performance:
            next:
              - if: "all cards rated good or easy"
                go: 2.0 Session loop
              - if: "some cards rated hard"
                go: 2.4 Review hard cards
              - if: "some cards rated again"
                go: 2.1 Present cards
              - go: 2.0 Session loop
        - 2.4 Review hard cards

  # ── Completion ──

  - 3.1 Review statistics

  - Done:
      type: terminate
      reason: Spaced repetition cycle complete
